<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta charset="utf-8" />
<title>数学ノート</title>

<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-firestore.js"></script>
<script>
// Initialize Firebase
var config = {
    apiKey: "AIzaSyA793YhUFWCJTI7s37BrLQN5HR5qDQGv_c",
    authDomain: "hip-rig-238101.firebaseapp.com",
    databaseURL: "https://hip-rig-238101.firebaseio.com",
    projectId: "hip-rig-238101",
    storageBucket: "hip-rig-238101.appspot.com",
    messagingSenderId: "802290277030"
};

firebase.initializeApp(config);

</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        extensions: ["tex2jax.js"],
        jax: ["input/TeX","output/SVG"],
        tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]}
    });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_SVG' async></script>
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=default' async></script> -->
<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script> -->
<!-- TeX-MML-AM_CHTML -->
<!-- jax: ["input/TeX","output/HTML-CSS"], -->

<!-- <script type="text/javascript" src="MathJax/MathJax.js" ></script> -->

<script src="js/dagre.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script type="text/javascript" src="js/graph.js?v=90"></script>
<script type="text/javascript" >
var logic_graph;
var cur_doc = { blocks: [] };
var block_cnt = 0;
var click_cnt = 0;


function body_onload(){
    var block_text = document.getElementById("block-text");
    var msg_text = document.getElementById("msg-text");
    logic_graph = graph_closure(block_text, msg_text);

    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            // User is signed in.
            var displayName = user.displayName;
            var email = user.email;
            var emailVerified = user.emailVerified;
            var photoURL = user.photoURL;
            var isAnonymous = user.isAnonymous;
            var uid = user.uid;
            var providerData = user.providerData;
            // ...
            console.log(`ログイン ${user.uid}`);

            logic_graph.user = user;


            var user1 = firebase.auth().currentUser;

            if (user1) {
                // User is signed in.
                console.log(user1);
            } 
            else {
                // No user is signed in.
                console.log("ログアウト");
            }

        } else {
            // User is signed out.
            // ...
            console.log("ログアウト");
        }
    });
}

</script>

<style type="text/css">
.m {
    position: absolute;
}
path {
    cursor: pointer;
}
</style>
<!-- 
    border-style:none;

 -->
</head>

<body onload="body_onload()">
$$
  \newcommand{\red}[1]{ \color{red}{#1} }
  \newcommand{\setR}{ \mathbf{R} }
  \newcommand{\opensets}[1]{ \mathscr{#1} }
  \newcommand{\closedsets}[1]{ \mathscr{#1} } 
  \newcommand{\define}{ \overset{def}{\iff} }
  \newcommand{\defeq}{ \overset{def}{=} }
$$
<a href="login.html" >ログイン</a><br/>
<span id="msg-text" style="font-size:larger; color:red">&nbsp;</span><br/>

<input type="text" style="width:50em" />
<input type="button" value="一覧" onclick="logic_graph.read_docs()" />
<input type="button" value="保存" onclick="logic_graph.save_docs()" />
<br/>
<textarea id="block-text" rows="20" style="width:50em" ></textarea><br/>
<br/>

</body>
</html>